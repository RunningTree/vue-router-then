"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){var e={$router:null,resolve:null,request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"push",o=arguments[1],n=this,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!o||""==o)throw new Error("location is missing");return new Promise(function(i,l){if(n.$router)switch(console.log("this.$router",n.$router),n.resolve=i,e){case"push":n.$router.push(o,t,r);break;case"replace":n.$router.replace(o,t,r);break;case"go":n.$router.go(o);break;default:l("requestType error:"+e)}else l("$router missing")}).catch(function(e){throw n.resolve=null,new Error(e)})},push:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.request("push",e,o,n)},replace:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.request("replace",e,o,n)},go:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.request("go",e)},modelLink:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.push(e).then(function(e){return console.log("then",e),e.$on("input",function(e){if(console.log("modellink.input",o,e),"function"==typeof o)o(e);else if("object"==(void 0===o?"undefined":_typeof(o)))if(o.$emit)o.$emit("input",e);else if(o.tagName){o.value=e;var n=document.createEvent("HTMLEvents");n.initEvent("input",!0,!0),o.dispatchEvent(n)}}),e})},clickElFun:function(o){var n=this.getAttribute("model-link");return n?(console.log(this),e.modelLink(n,this.vnode&&this.vnode.componentInstance?this.vnode.componentInstance:this)):Promise.resolve()}},o={};o.install=function(o){Object.defineProperty(o.prototype,"$routerThen",{value:e}),o.directive("model-link",function(o,n,t){o.binding=n,o.vnode=t,o.setAttribute("model-link",n.value),o.removeEventListener("click",e.clickElFun),o.addEventListener("click",e.clickElFun)}),o.mixin({beforeRouteEnter:function(o,n,t){console.log("routerThen.resolve",e.resolve),e.resolve?t(function(o){e.resolve(o),e.resolve=null}):t(),console.log("model-link.beforeRouteEnter",o,n,t)},beforeRouteUpdate:function(o,n,t){console.log("routerThen.resolve",e.resolve),e.resolve&&(e.resolve(this),e.resolve=null),t(),console.log("model-link.beforeRouteUpdate",o,n,t)}})},o.initRouter=function(o){e.$router=o},"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&define.cmd?module.exports=o:"function"==typeof define&&define.amd?define(function(){return o}):(this.moduleName=o,window.Vue&&Vue.use(o),window.$routerThen=o)}).call(function(){return this||("undefined"!=typeof window?window:global)});